angular.module("krApp",["ui.router","home","mantenedor","krApp.services","krApp.factories","krApp.directives","krApp.filters","krApp.constant","login","ui.bootstrap","datatables","ngCookies","ngAnimate","toaster","frapontillo.bootstrap-switch","ngStorage","ngDropdowns"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","CONSTANTS",function($stateProvider,$urlRouterProvider,$httpProvider,CONSTANTS){$httpProvider.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",$urlRouterProvider.otherwise("/login")}]).controller("MainController",["$scope",function($scope){console.log("Main Controller")}]).run(["$rootScope","CONSTANTS","$state","AuthService","$timeout","modalFactory","$q","$localStorage","$sessionStorage",function($rootScope,CONSTANTS,$state,AuthService,$timeout,modalFactory,$q,$localStorage,$sessionStorage){function _ajaxGetSelection(){console.log("AJAX EX"),$sessionStorage.root?($sessionStorage.root.seleccion_sostenedor?($rootScope.seleccion.vsostenedor=$sessionStorage.root.seleccion_sostenedor.vsostenedor,$rootScope.seleccion.sostenedor=$sessionStorage.root.seleccion_sostenedor.sostenedor):$rootScope.seleccion.sostenedor=!0,$sessionStorage.root.seleccion_anio?($rootScope.seleccion.vanio=$sessionStorage.root.seleccion_anio.vanio,$rootScope.seleccion.anio=$sessionStorage.root.seleccion_anio.anio):$rootScope.seleccion.anio=!0,$sessionStorage.root.seleccion_establecimiento?($rootScope.seleccion.vestablecimiento=$sessionStorage.root.seleccion_establecimiento.vestablecimiento,$rootScope.seleccion.establecimiento=$sessionStorage.root.seleccion_establecimiento.establecimiento):$rootScope.seleccion.establecimiento=!0):($rootScope.seleccion.sostenedor=!0,$rootScope.seleccion.anio=!0,$rootScope.seleccion.establecimiento=!0),_validateSelection()}function _validateSelection(){AuthService.isAuthenticated()&&(console.log("INGRESANDO"),1==$rootScope.seleccion.sostenedor?_openAddModal("sostenedor"):1==$rootScope.seleccion.establecimiento?_openAddModal("establecimiento"):1==$rootScope.seleccion.anio&&_openAddModal("anio"))}function _openAddModal(type){var template=CONSTANTS.DIR_PATH+"app/login/select-"+type+"-modal.tpl.html",ctrl="select"+type+"ModalInstanceCtrl",size="sm",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),"sostenedor"==type&&_openAddModal("establecimiento"),"establecimiento"==type&&_openAddModal("anio")})}moment.locale("es"),$rootScope.currencySign=CONSTANTS.CURRENCY_SIGN,$rootScope.dateRange=90,$rootScope.imagePath=CONSTANTS.IMAGE_PATH,$rootScope.seleccion={},$rootScope.seleccion.sostenedor=!1,$rootScope.seleccion.establecimiento=!1,$rootScope.seleccion.anio=!1,$rootScope.seleccion.vsostenedor="...",$rootScope.seleccion.vestablecimiento="...",$rootScope.seleccion.vanio="...",$rootScope.openAddModal=_openAddModal,$rootScope.$on("logout",function(){AuthService.logout(),$state.go("login")}),$rootScope.login_isok=AuthService.isAuthenticated(),$rootScope.current_state=$state.current.name,$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){$rootScope.current_state=$state.current.name,$rootScope.login_isok=AuthService.isAuthenticated(),AuthService.isAuthenticated()?"login"==toState.name&&(event.preventDefault(),$state.go("home.dashboard")):"login"!=toState.name&&(event.preventDefault(),$state.go("login")),_ajaxGetSelection()}),$rootScope.$on("$stateNotFound",function(event,unfoundState,fromState,fromParams){console.log("can't find the route")}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){console.log("error route")}),$rootScope.time=new Date,$rootScope.fecha=moment().format("dddd"),$rootScope.$watch("time",function(){$timeout(function(){$rootScope.time=new Date},1e3)})}]),angular.module("accounts",["account-list","account-overview","account-activity","account-billing","account-note","account-topup"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("account",{"abstract":!0,url:"/account",template:"<ui-view/>",controller:"AccountController"}).state("account.list",{url:"/list",templateUrl:"../app/account/list/account-list.tpl.html",controller:"AccountListController"}).state("account.overview",{url:"/:id/overview",templateUrl:"../app/account/overview/account-overview.tpl.html",controller:"AccountOverviewController"}).state("account.activity",{url:"/:id/activity",templateUrl:"../app/account/activity/account-activity.tpl.html",controller:"AccountActivityController"}).state("account.location",{url:"/:id/location",templateUrl:"../app/account/location/account-location.tpl.html",controller:"AccountLocationController"}).state("account.billing",{url:"/:id/billing",templateUrl:"../app/account/billing/account-billing.tpl.html",controller:"AccountBillingController"}).state("account.database",{url:"/:id/database",templateUrl:"../app/account/database/account-database.tpl.html",controller:"AccountDatabaseController"}).state("account.notes",{url:"/:id/notes",templateUrl:"../app/account/note/account-note.tpl.html",controller:"AccountNoteController"}).state("account.topup",{url:"/:id/topup",templateUrl:"../app/account/topup/topup.tpl.html",controller:"AccountTopUpController"})}]).controller("AccountController",["$scope","$stateParams","Test","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope",function($scope,$stateParams,Test,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope){function _callEmployeeService(customerID){Test.getEmployee(customerID).then(function(response){"success"===response.data.status?($scope.employee=Tools.decodeFields(response.data.Test),$scope.employee.phoneNumber=phoneUtils.formatInternational($scope.employee.phoneNumber,$scope.employee.ISO2),$scope.followSelected="true"==response.data.isFollowed?"active":"",$scope.favouriteSelected="true"==response.data.isFavourite?"active":"",$scope.typeOfSim.title=response.data.type||"Sticker","Sticker"==response.data.type?$scope.typeOfSim.classIcon="fa-eye":"Virtual Sim"==response.data.type?$scope.typeOfSim.classIcon="fa-eye":"Hard Sim"==response.data.type?$scope.typeOfSim.classIcon="fa-eye":$scope.typeOfSim.classIcon="fa-eye",console.log($scope.employee)):console.error(response.data.error)},function(response){console.error("Problems to load the users")})}function _callBalanceService(customerID){Test.getBalance(customerID).then(function(response){"success"==response.data.status?$scope.employeeBalance=Tools.dollarFormated(response.data.balance):console.log(response.data.error)},function(response){console.log("error")})}function _callCreditCardService(customerID){Test.getCreditCard(customerID).then(function(response){"success"===response.data.status?(response.data.creditCardInfoPackage&&($scope.creditCardInfo=response.data.creditCardInfoPackage.stripeClientId,$scope.taxRate=response.data.taxPercentage),console.log(response)):console.error(response)},function(response){console.error("Problems to load the users")})}function _openPopupBalance(template,size,controller,data){var path="../app/account/common/";$scope.modalInstance=$uibModal.open({animation:!0,templateUrl:path+template+"-modal.tpl.html",controller:controller,size:size,resolve:{params:function(){return data}}}),$scope.modalInstance.result.then(function(result){$timeout(function(){_callBalanceService(data.customerID)},2e4)},function(result){console.log("this is the result "+result)})}function _topup(customerID){var template="topup",size="sm",controller="TopupModal",params={customerID:customerID,creditCard:$scope.creditCardInfo,taxRate:$scope.taxRate};_openPopupBalance(template,size,controller,params)}function _addCreditCard(){var template="add-credit-card",size="md",controller="AddCreditCardModal";_openPopupBalance(template,size,controller)}function _onclick_follow(customerID){"active"==$scope.followSelected?Admin.removeVIP(customerID,"mauricio@barria.jo").then(function(response){"success"==response.data.status&&($scope.followSelected="")}):Admin.addVIP(customerID).then(function(response){"success"==response.data.status&&($scope.followSelected="active")})}function _onclick_favourite(customerID){"active"==$scope.favouriteSelected?Admin.removeFavourite(customerID).then(function(response){"success"==response.data.status&&($scope.favouriteSelected="")}):Admin.addFavourite(customerID).then(function(response){"success"==response.data.status&&($scope.favouriteSelected="active")})}$scope.employee={},$scope.balance=!1,$scope.followSelected="",$scope.favouriteSelected="",$scope.typeOfSim={},$scope.topup=_topup,$scope.addCreditCard=_addCreditCard,$scope.onclick_follow=_onclick_follow,$scope.onclick_favourite=_onclick_favourite,$scope.$on("get-employee",function(evt,customerID){_callEmployeeService(customerID)}),$scope.$on("get-employee-balance",function(evt,customerID){_callBalanceService(customerID)}),$scope.$on("get-employee-creditcard",function(evt,customerID){_callCreditCardService(customerID)})}]),angular.module("account-activity",[]).controller("AccountActivityController",["$scope","Test","Tools","CONSTANTS","$rootScope","$stateParams","DTOptionsBuilder","DTColumnBuilder",function($scope,Test,Tools,CONSTANTS,$rootScope,$stateParams,DTOptionsBuilder,DTColumnBuilder){"use strict";function _init(){_loadUsageSummary(),$scope.activeTab("call"),$scope.$emit("get-employee",$scope.customerID),$scope.$emit("get-employee-balance",$scope.customerID),$scope.$emit("get-employee-creditcard",$scope.customerID)}function _activeTab(tab){switch(tab){case"call":$scope.sortColText=$scope.callSortColText,$scope.currentTab="call",_loadCallHistory();break;case"data":$scope.sortColText=$scope.dataSortColText,$scope.currentTab="data",_loadDataHistory();break;case"sms":$scope.sortColText=$scope.smsSortColText,$scope.currentTab="sms",_loadSmsHistory()}}function _sortByColumn(event){var sortCol=$(event.target).data("sort")||$(event.target).parent().data("sort"),sortColText=$(event.target)[0].innerText||$(event.target).parent()[0].innerText;switch($scope.currentTab){case"call":$scope.callSort=sortCol,$scope.callSortColText=sortColText,_loadCallHistory();break;case"data":$scope.dataSort=sortCol,$scope.dataSortColText=sortColText,_loadDataHistory();break;case"sms":$scope.smsSort=sortCol,$scope.smsSortColText=sortColText,_loadSmsHistory();break;default:alert("activity table not defined")}}function _loadUsageSummary(){Test.getUsageSummary($scope.customerID,$scope.startDate).then(function(response){"success"==response.data.status?($scope.summary.callCount=response.data.callSummary.totalCalls,$scope.summary.callUsage=response.data.callSummary.totalDuration,$scope.summary.callCost=response.data.callSummary.totalCost,$scope.summary.dataUsage=response.data.dataSummary.totalUsage,$scope.summary.dataCost=response.data.dataSummary.totalCost,$scope.summary.smsCount=response.data.smsSummary.totalMessages,$scope.summary.smsCost=response.data.smsSummary.totalCost,$scope.summary.totalCost=parseFloat($scope.summary.callCount.replace("$",""))+parseFloat($scope.summary.dataCost.replace("$","")),$scope.summary.totalCost=$scope.summary.totalCost.toFixed(2)):console.log("Problems to load usage summary info.")},function(response){console.log("Problems calling getUsageSummary")})}function _loadCallHistory(){Test.getHistory($scope.customerID,"callHistory",$scope.startDate,$scope.direction,$scope.callSort,$scope.maxNumberOfResults,$scope.callStartingPosition).then(function(response){"success"===response.data.status?($scope.callHistory=response.data.usageHistoryPackage.callHistory,$scope.callTotalItems=response.data.usageHistoryPackage.total,_cleanActiveClass(),$scope.boxSelected.activeCalls="active"):console.log("Problems to load the activity call info.")},function(response){console.log("Problems to call getHistory callHistory")})}function _loadDataHistory(){Test.getHistory($scope.customerID,"dataHistory",$scope.startDate,$scope.direction,$scope.dataSort,$scope.maxNumberOfResults,$scope.dataStartingPosition).then(function(response){"success"===response.data.status?($scope.dataHistory=response.data.usageHistoryPackage.dataHistory,$scope.dataSession=response.data.usageHistoryPackage.dataSession,$scope.dataTotalItems=response.data.usageHistoryPackage.total,angular.forEach($scope.dataHistory,function(value,key){value.bytesUsedFormated=Tools.getBytesString(value.bytesUsed),value.icon=Tools.getBytesUsageIconFlag(value.bytesUsed)}),_cleanActiveClass(),$scope.boxSelected.activeData="active"):Tools.showNotification("error","Problems to load the activity data info.")},function(response){Tools.showConnectionDownNotification()})}function _loadSmsHistory(){Test.getHistory($scope.customerID,"smsHistory",$scope.startDate,$scope.direction,$scope.smsSort,$scope.maxNumberOfResults,$scope.smsStartingPosition).then(function(response){"success"===response.data.status?($scope.smsHistory=response.data.usageHistoryPackage.smsHistory,$scope.smsTotalItems=response.data.usageHistoryPackage.total,_cleanActiveClass(),$scope.boxSelected.activeSms="active"):Tools.showNotification("error","Problems to load the activity sms info.")},function(response){Tools.showConnectionDownNotification()})}function _getCalls(){_cleanActiveClass(),"active"!=$scope.boxSelected.activeCalls&&$scope.activeTab("call")}function _getData(){_cleanActiveClass(),"active"!=$scope.boxSelected.activeData&&$scope.activeTab("data")}function _getSms(){"active"!=$scope.boxSelected.activeSms&&$scope.activeTab("sms")}function _cleanActiveClass(){$scope.boxSelected.activeCalls="",$scope.boxSelected.activeData="",$scope.boxSelected.activeSms=""}function _onChange_dateRange(selected){switch($scope.startDate=Tools.getPastDate(selected.value),_loadUsageSummary(),$scope.currentTab){case"call":_loadCallHistory();break;case"data":_loadDataHistory();break;case"sms":_loadSmsHistory();break;default:alert("activity table not defined")}}$scope.customerID=$stateParams.id,$scope.callCurrentPage=1,$scope.callTotalItems=0,$scope.callHistory=[],$scope.callSort="connectTime",$scope.callSortColText="Time (GMT -5)",$scope.callStartingPosition=Tools.getPaginationStartPosition($scope.callCurrentPage),$scope.data={},$scope.data.selectType="history",$scope.dataCurrentPage=1,$scope.dataTotalItems=0,$scope.dataHistory=[],$scope.dataSession=[],$scope.dataSort="connectTime",$scope.dataSortColText="Time (GMT -5)",$scope.dataStartingPosition=Tools.getPaginationStartPosition($scope.dataCurrentPage),$scope.smsCurrentPage=1,$scope.smsTotalItems=0,$scope.smsHistory=[],$scope.smsSort="connectTime",$scope.smsSortColText="Time (GMT -5)",$scope.smsStartingPosition=Tools.getPaginationStartPosition($scope.smsCurrentPage),$scope.boxSelected={activeCalls:"",activeData:"",activeSms:""},$scope.ddSelectOptions=[{text:"Last 24 hours",value:1},{text:"Last 7 days",value:7},{text:"Last 30 days",value:30},{text:"Last 3 months",value:"90"},{text:"This year",value:"365"}],$scope.ddSelectSelected=$scope.ddSelectOptions[0],$scope.dateRange=$scope.ddSelectSelected,$scope.startDate=Tools.getPastDate($scope.dateRange),$scope.direction="DESC",$scope.maxNumberOfResults=CONSTANTS.PAGINATION_MAX_NUMBER,$scope.summary={},$scope.init=_init,$scope.activeTab=_activeTab,$scope.sortByColumn=_sortByColumn,$scope.getCalls=_getCalls,$scope.getData=_getData,$scope.getSms=_getSms,$scope.onChange_dateRange=_onChange_dateRange,$scope.init(),$scope.$watch("direction",function(newValue,oldValue){newValue!=oldValue&&($scope.direction=newValue)}),$scope.$watch("callCurrentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.callStartingPosition=Tools.getPaginationStartPosition($scope.callCurrentPage),_loadCallHistory())}),$scope.$watch("dataCurrentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.dataStartingPosition=Tools.getPaginationStartPosition($scope.dataCurrentPage),_loadDataHistory())}),$scope.$watch("smsCurrentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.smsStartingPosition=Tools.getPaginationStartPosition($scope.smsCurrentPage),_loadSmsHistory())})}]),angular.module("account-billing",["account-billing-refund","sim-swap-modal","download-detail-modal"]).controller("AccountBillingController",["$scope","Corporate","Admin","Tools","CONSTANTS","$uibModal","$rootScope","$stateParams",function($scope,Corporate,Admin,Tools,CONSTANTS,$uibModal,$rootScope,$stateParams){"use strict";function _init(){_loadBillingHistory(),$scope.$emit("get-employee",$scope.customerID),$scope.$emit("get-employee-balance",$scope.customerID),$scope.$emit("get-employee-creditcard",$scope.customerID)}function _loadBillingHistory(){Corporate.getBillingHistory($scope.customerID,$scope.startDate,$scope.direction,$scope.sort,$scope.key,$scope.maxNumberOfResults,$scope.startingPosition).then(function(response){"success"===response.data.status?(console.log(response),$scope.history=response.data.billingPackage,$scope.totalItems=response.data.total,angular.forEach($scope.history,function(value,key){value.serviceValue=value.serviceValue/100,value.amountChargedIncludingTaxInCents=value.amountChargedIncludingTaxInCents/100,value.previousRefundedAmount=value.previousRefundedAmount/100,value.remainingBalance=value.amountChargedIncludingTaxInCents-value.previousRefundedAmount})):Tools.showNotification("error","Problems to load the billing info.")},function(response){Tools.showConnectionDownNotification()})}function _sortByColumn(event){var sortCol=$(event.target).data("sort")||$(event.target).parent().data("sort"),sortColText=$(event.target)[0].innerText||$(event.target).parent()[0].innerText;$scope.sort=sortCol,$scope.sortColText=sortColText,_loadBillingHistory()}function _refund(history){$scope.modalInstance=$uibModal.open({animation:!0,templateUrl:"../app/account/billing/employee-billing-refund.tpl.html",controller:"employeeBillingRefund",size:"md",resolve:{history:function(){return history}}}),$scope.modalInstance.result.then(function(refund){Admin.setRefundBalance($scope.customerID,refund.totalRefundInCents,refund.billingLookupId,refund.cancelService,refund.reason).then(function(response){"success"===response.data.status?(Tools.showNotification("success","Refund Success."),_loadBillingHistory()):Tools.showNotification("error","Problems to refund.")},function(response){Tools.showConnectionDownNotification()})})}function _download(){var params={},template="download-detail",size="sm",controller="DownloadDetailModalController";params.customerID=$scope.customerID;var data=params;$scope.open(template,size,controller,data)}function _searchBilling(){$scope.key=$scope.searchField,_loadBillingHistory()}function _onChange_dateRange(selected){$scope.startDate=Tools.getPastDate(selected.value),_loadBillingHistory()}$scope.customerID=$stateParams.id,$scope.currentPage=1,$scope.totalItems=0,$scope.history=[],$scope.sort="chargeDate",$scope.sortColText="Purchase Date",$scope.key="",$scope.startingPosition=Tools.getPaginationStartPosition($scope.currentPage),$scope.ddSelectOptions=[{text:"Last 24 hours",value:1},{text:"Last 7 days",value:7},{text:"Last 30 days",value:30},{text:"Last 3 months",value:"90"},{text:"This year",value:"365"}],$scope.ddSelectSelected=$scope.ddSelectOptions[0],$scope.dateRange=$scope.ddSelectSelected,$scope.startDate=Tools.getPastDate($scope.dateRange),$scope.searchField="",$scope.direction="DESC",$scope.maxNumberOfResults=CONSTANTS.PAGINATION_MAX_NUMBER,$scope.init=_init,$scope.download=_download,$scope.sortByColumn=_sortByColumn,$scope.refund=_refund,$scope.searchBilling=_searchBilling,$scope.onChange_dateRange=_onChange_dateRange,$scope.init(),$scope.$watch("direction",function(newValue,oldValue){newValue!=oldValue&&($scope.direction=newValue)}),$scope.$watch("dateRange",function(newValue,oldValue){newValue!=oldValue&&($scope.startDate=Tools.getPastDate($scope.dateRange),_loadBillingHistory())}),$scope.$watch("currentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.startingPosition=Tools.getPaginationStartPosition($scope.currentPage),_loadBillingHistory())}),$rootScope.$broadcast("showMenus"),$rootScope.sidebar=!0,$scope.open=function(template,size,controller,data){var path="../app/account/billing/";$scope.modalInstance=$uibModal.open({animation:!0,templateUrl:path+template+"-modal.tpl.html",controller:controller,size:size,resolve:{params:function(){return data}}}),$scope.modalInstance.result.then(function(result){},function(result){console.log("this is the result "+result)})}}]),angular.module("download-detail-modal",[]).controller("DownloadDetailModalController",["$scope","Test","$uibModalInstance","params",function($scope,Test,$uibModalInstance,params){$scope.listDownloads=[{text:"Usage + Billing",value:1},{text:"Another",value:2}],$scope.listDownloadsSelected=$scope.listDownloads[0],$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("account-billing-refund",[]).controller("employeeBillingRefund",["$scope","$uibModalInstance","history",function($scope,$uibModalInstance,history){$scope.employee={},$scope.employee.email=decodeURIComponent(history.email),$scope.employee.reason="",$scope.employee.cancelService=!1,$scope.employee.beforeTax=0,$scope.employee.taxRate=parseFloat(history.taxPercentage),$scope.employee.totalRefund=0,$scope.employee.totalRefundInCents=0,$scope.employee.maxRefund=history.remainingBalance,$scope.employee.tax=$scope.employee.beforeTax*$scope.employee.taxRate,$scope.employee.billingLookupId=history.billingLookupId,$scope.save=function(){$uibModalInstance.close($scope.employee)},$scope.cancel=function(){$uibModalInstance.dismiss()},$scope.updateBalance=function(){$scope.employee.tax=$scope.employee.beforeTax*$scope.employee.taxRate,$scope.employee.totalRefund=parseFloat($scope.employee.beforeTax)*(1+$scope.employee.taxRate),$scope.employee.totalRefund=$scope.employee.totalRefund>$scope.employee.maxRefund?$scope.employee.maxRefund:$scope.employee.totalRefund,$scope.employee.tax=isNaN($scope.employee.tax)?0:$scope.employee.tax.toFixed(2),$scope.employee.totalRefund=isNaN($scope.employee.totalRefund)?0:$scope.employee.totalRefund.toFixed(2),$scope.employee.totalRefundInCents=100*$scope.employee.totalRefund}}]),angular.module("account-list",[]).controller("AccountListController",["$scope","Test","$state","CONSTANTS","Tools",function($scope,Test,$state,CONSTANTS,Tools){function _init(){_getPostsSummary($scope.startingPosition)}function _getPostsSummary(pos){Test.getPostsSummary(pos).then(function(response){console.log(response.data),$scope.employees=response.data},function(response){console.log(response.data)})}function _sortByColumn(event){var sortCol=$(event.target).data("sort")||$(event.target).parent().data("sort"),sortColText=$(event.target)[0].innerText||$(event.target).parent()[0].innerText;$scope.sort=sortCol,$scope.sortColText=sortColText,_getPostsSummary()}$scope.currentPage=2,$scope.totalItems=50,$scope.numPages=24,$scope.sort="chargeDate",$scope.sortColText="Purchase Date",$scope.key="",$scope.startingPosition=Tools.getPaginationStartPosition($scope.currentPage),$scope.maxNumberOfResults=CONSTANTS.PAGINATION_MAX_NUMBER,$scope.employees=[],$scope.init=_init,$scope.sortByColumn=_sortByColumn,$scope.init(),$scope.listAllCountries=[{value:0,text:"All Countries"},{value:1,text:"China"}],$scope.listAllCountriesSelected=$scope.listAllCountries[0],$scope.pageChanged=function(page){console.log("page",page),startPosition=Tools.getPaginationStartPosition(page),getPostsSummary($scope.accountNumber,startPosition)},$scope.$watch("currentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.startingPosition=Tools.getPaginationStartPosition($scope.currentPage),_getPostsSummary($scope.startingPosition))})}]),angular.module("account-note",["add-note-modal","delete-note-modal"]).controller("AccountNoteController",["$scope","Test","Tools","CONSTANTS","$uibModal","modalFactory","$rootScope","$stateParams",function($scope,Test,Tools,CONSTANTS,$uibModal,modalFactory,$rootScope,$stateParams){"use strict";function _init(){_loadNotes(),$scope.$emit("get-employee",$scope.customerID),$scope.$emit("get-employee-balance",$scope.customerID),$scope.$emit("get-employee-creditcard",$scope.customerID)}function _loadNotes(){Test.getAccountNote($scope.customerID,$scope.startingPosition,$scope.maxNumberOfResults).then(function(response){"success"===response.data.status?($scope.totalItems=response.data.total,$scope.notes=response.data.notesPackage):console.log("Problems to load the notes info.")},function(response){Tools.showConnectionDownNotification()})}function _openNoteModal(note){var template="../app/account/note/add-note-modal.tpl.html",ctrl="noteModalInstanceCtrl",size="sm",params=note;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){responseNote.is_edit?Test.updateAccountNote($scope.customerID,note.id,responseNote.note).then(function(response){"success"==response.data.status?_loadNotes():console.error(response.data.error)},function(response){Tools.showConnectionDownNotification()}):Test.setAccountNote($scope.customerID,responseNote.note).then(function(response){"success"==response.data.status?_loadNotes():console.error(response.data.error)},function(response){Tools.showConnectionDownNotification()})})}function _openDeleteNoteModal(note_id){$scope.modalInstance=$uibModal.open({animation:!0,templateUrl:"../app/account/note/delete-note-modal.tpl.html",controller:"deleteNoteModalInstanceCtrl",size:"sm",resolve:{noteId:function(){return note_id}}}),$scope.modalInstance.result.then(function(noteId){Test.deleteAccountNote($scope.customerID,noteId).then(function(response){_loadNotes()},function(response){Tools.showConnectionDownNotification()})})}$scope.customerID=$stateParams.id,$scope.currentPage=1,$scope.totalItems=0,$scope.notes=[],$scope.maxNumberOfResults=CONSTANTS.PAGINATION_MAX_NUMBER,$scope.startingPosition=Tools.getPaginationStartPosition($scope.currentPage),$scope.init=_init,$scope.openNoteModal=_openNoteModal,$scope.openDeleteNoteModal=_openDeleteNoteModal,$scope.init(),$scope.$watch("currentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.startingPosition=Tools.getPaginationStartPosition($scope.currentPage),_loadNotes())})}]),angular.module("add-note-modal",[]).controller("noteModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.note=params?params.notes:"",$scope.returnObj={},$scope.returnObj.note=$scope.returnObj.note,$scope.returnObj.is_edit=!!$scope.note,$scope.saveNote=function(){$scope.returnObj.note=$scope.note,$uibModalInstance.close($scope.returnObj)},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("delete-note-modal",[]).controller("deleteNoteModalInstanceCtrl",["$scope","$uibModalInstance","noteId",function($scope,$uibModalInstance,noteId){$scope.save=function(){$uibModalInstance.close(noteId)},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("account-overview",["purchase-package-modal","purchase-number-modal","sim-swap-modal","number-detail-modal","package-detail-modal"]).controller("AccountOverviewController",["$scope","Test","Tools","SMbaseproject","$window","$uibModal","$rootScope","$stateParams","$timeout",function($scope,Test,Tools,SMbaseproject,$window,$uibModal,$rootScope,$stateParams,$timeout){function _init(){$scope.$emit("get-employee",$scope.customerID),$scope.$emit("get-employee-balance",$scope.customerID),$scope.$emit("get-employee-creditcard",$scope.customerID),_callGetCellularInfo(),_callGetOwnDid(),_callEmployeewnedPackages($scope.customerID),_callGetPermanentPackageInformation(),_callGetPermanentPackageInformation()}function _callGetCellularInfo(){Test.getCellularInfo($scope.customerID).then(function(response){"success"===response.data.status?$scope.cellularInfo={callForwardingPackage:response.data.callForwardingNumbersPackage,data:"1"==response.data.simInformation.dataStatus,sim:"1"==response.data.simInformation.simStatus,sip:"1"==response.data.simInformation.sipStatus,voicemail:"1"==response.data.simInformation.voiceMailStatus,callRecording:"1"==response.data.callRecordingPackage.callRecordingStatus,reachTelna:"1"==response.data.reachability.forwardingStatus,reach:"1"==response.data.reachability.isReachableHomeFlagStatus,simInfo:response.data.simInformation.sim}:console.error(response.data.error)},function(response){console.error("Problems to load the users")})}function _callGetOwnDid(){Test.getOwnedDids($scope.customerID).then(function(response){var allNumber=response.data.dids,regularNumber=[],hiddenNumber=[];angular.forEach(allNumber,function(value,key){value.didNumber=phoneUtils.formatInternational(value.didNumber,value.countryIso2),value.isReachMeNumber="true"===value.isReachMeNumber,value.isCliNumber="true"===value.isCliNumber,value.isSMSEnabled="true"===value.isSMSEnabled,value.isHidden?hiddenNumber.push(value):regularNumber.push(value)}),$scope.forwardingNumbersPackage=regularNumber,$scope.hiddenNumbers=hiddenNumber})}function _callGetPermanentPackageInformation(){Test.getPermanentPackageInformation($scope.customerID).then(function(response){$scope.dailyDataAutoRenew=response.data,$scope.isPermanentPackage=1==$scope.dailyDataAutoRenew.isPermanentPackage?"ON":"OFF"})}function _callGetPermanentPackageInformation(){Test.getAvailablePermanentPackages($scope.customerID).then(function(response){"success"==response.data.status&&($scope.availablePermanentPackages=response.data.packageForPermanentPackages)})}function _updateHiddenNumbers(evt){evt.preventDefault(),isShowingHiddenNumber?(angular.forEach($scope.hiddenNumbers,function(value){var idx=$scope.forwardingNumbersPackage.indexOf(value);$scope.forwardingNumbersPackage.slice(idx,1)}),$scope.hiddenNumberText="Show Hidden Numbers",$scope.classUpdateNumber="fa-angle-down"):(angular.forEach($scope.hiddenNumbers,function(value){$scope.forwardingNumbersPackage.push(value)}),$scope.hiddenNumberText="Hide Hidden Numbers",$scope.classUpdateNumber="fa-angle-up"),isShowingHiddenNumber=!isShowingHiddenNumber}function _setEmployeeStatus(type,status){status=status?"ON":"OFF",Test.setStatus($scope.customerID,type,status).then(function(response){"success"===response.data.status?(console.log("success"),_callGetCellularInfo()):console.error(response.data.error)},function(response){console.error("Problems to set user status")})}function _callEmployeewnedPackages(customerID){Test.getOwnedPackages(customerID).then(function(response){"success"===response.data.status?($scope.activePackages=[],$scope.inactivePackages=[],$scope.packages=response.data.ownedPackages.packagesBoughtPackage,0!=response.data.ownedPackages.packagesBoughtPackage.length?($scope.packages=response.data.ownedPackages.packagesBoughtPackage,angular.forEach($scope.packages,function(value,key){"true"==value.isPackageActive?$scope.activePackages.push(value):(value.opened=!1,value.activate=!1,$scope.inactivePackages.push(value)),value.usePercentage=value.timeRemaining?100*Tools.getNumbersFromString(value.timeRemaining)/value.packageDuration:100,value.show=!0}),console.log()):$scope.packages.push({packageTitle:"No packages owned.",isPackageActive:"",show:!1})):console.error(response)},function(response){console.error("Problems to load the users")})}function _setPackageDate(pid,date){date=moment().format("YYYY/MM/DD hh:mm:ss"),Test.updatePackageActivationDate($scope.customerID,pid,date).then(function(response){"success"===response.data.status?(console.log("package set"),$timeout(function(){_callEmployeewnedPackages($scope.customerID)},1e4)):console.log(response.data.error)},function(response){console.log("server error setpackageDate")})}function _editNumber(params){var template="number-detail",size="sm",controller="NumberDetailModalController";params.customerID=$scope.customerID;var data=params;$scope.open(template,size,controller,data)}function _getPackageDetails(evt,params){evt.preventDefault(),params.customerID=$scope.customerID;var template="package-detail",size="sm",controller="PackageDetailModalController";
$scope.open(template,size,controller,params)}function _clearLocationUpdates(customerID){Test.clearLocationUpdates(customerID).then(function(response){"success"==response.data.status&&console.log("success")})}function _cancelAccount(){Test.removeCustomer($scope.customerID).then(function(response){"success"===response.data.status?console.log("success"):console.error(response.data.error)},function(response){console.error("service is not working")})}$scope.customerID=$stateParams.id,$scope.packages=[],$scope.activePackages=[],$scope.inactivePackages=[],$scope.isPermanentPackage="",$scope.availablePermanentPackages={},$scope.forwardingNumbersPackage=[],$scope.hiddenNumberText="Show Hidden Numbers",$scope.classUpdateNumber="fa-angle-down",$scope.hiddenNumbers=[],$scope.employeeCopy={},$scope.creditCardInfo="No Credit Card on file",$scope.data={autorenew:0},$scope.active="active",$scope.cellularInfo={},$scope.otaCommands={command:[{name:"",text:"Select An Option"},{name:"otaSmscPush",text:"Sms push"},{name:"otaImsiPush",text:"Imsi Push"},{name:"otaCallForwardingSet",text:"Enable Call Forwarding"},{name:"otaSettingsAll",text:"Setting All"},{name:"otaPlmnPriority",text:"Plmn Priority"},{name:"performProbeCallForwarding",text:"Perform Probe Call Forwarding"},{name:"otaCallForwardingStatus",text:"Call Forwarding Status"},{name:"otaCallForwardingClear",text:"Clear Call Forwarding"},{name:"otaTriggerPopup",text:"Trigger popup"},{name:"otaSimOverrideMode",text:"Sim override"},{name:"otaCallback",text:"Call Back"},{name:"otaConnectivity",text:"Connectivity"},{name:"otaSendServiceSms",text:"Send Service SMS"},{name:"otaSelectProfile",text:"Select Profile"},{name:"otaLongDistanceCustom",text:"Long Distance Custom"},{name:"otaLongDistanceNumber",text:"Long Distance Number"},{name:"otaEnablePinRebootStk",text:"Enable Reboot STK"},{name:"otaSwitchByCountryId",text:"Switch By Country Id"}],imumtype:[{name:"inumPolandNetworkA",text:"Telna Poland"},{name:"inumNetworkA",text:"Telna Telna"},{name:"inumTimNetworkA",text:"Telna Tim"},{name:"inumAmericaNetworkA",text:"America"},{name:"inumOta2",text:"OTA 2"},{name:"inumOta3",text:"OTA 3"},{name:"inumOta4",text:"OTA 4"},{name:"inumOta5",text:"OTA 5"},{name:"inumOta6",text:"OTA 6"},{name:"inumOta7",text:"OTA 7"},{name:"inumOta8",text:"OTA 8"},{name:"inumOta9",text:"OTA 9"},{name:"inumOta10",text:"OTA 10"}]},$scope.otaCommandSelected=$scope.otaCommands.command[0],$scope.showEditPersonalInfo=!1,$scope.itemSelected={},$scope.sizeSwitch="mini";var isShowingHiddenNumber=!1;$scope.setEmployeeStatus=_setEmployeeStatus,$scope.updateHiddenNumbers=_updateHiddenNumbers,$scope.editNumber=_editNumber,$scope.getPackageDetails=_getPackageDetails,$scope.clearLocationUpdates=_clearLocationUpdates,$scope.cancelAccount=_cancelAccount,$scope.setPackageDate=_setPackageDate,_init(),$scope.$watch("isPermanentPackage",function(newval,oldval){if(oldval){var customerID=$scope.customerID,pid=$scope.availablePermanentPackages[0].packageId,status=newval;Test.setAsPermanentPackage(customerID,pid,status).then(function(){console.log("set as daily auto renew")})}}),$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.openCalendar=function(idx){$scope.inactivePackages[idx].opened=!0},$scope.activatePackage=function(evt,idx){evt.preventDefault(),$scope.inactivePackages[idx].activate=!$scope.inactivePackages[idx].activate},$scope.updateCustomerInfo=function(){Test.editEmployee($scope.employeeCopy).then(function(response){"success"==response.data.status?(console.log(response.data.employeeInformation),angular.copy($scope.employeeCopy,$scope.employee),$scope.showEditPersonalInfo=!1):console.log(response.data.error)},function(response){console.log("Is not possible to update the user at this time. Please try again later")})},$scope.editPersonalInfo=function(){angular.copy($scope.employee,$scope.employeeCopy),$scope.showEditPersonalInfo=!$scope.showEditPersonalInfo},$scope.openBuyNumbers=function(){$scope.open("purchase-number","sm","ModalPurchaseNumberController",$scope.employee.accountId)},$scope.open=function(template,size,controller,data){var path="../app/account/overview/";$scope.modalInstance=$uibModal.open({animation:!0,templateUrl:path+template+"-modal.tpl.html",controller:controller,size:size,resolve:{params:function(){return data}}}),$scope.modalInstance.result.then(function(result){"buy-package"==result&&_callEmployeewnedPackages($scope.customerID)},function(result){console.log("this is the result "+result)})}}]),angular.module("number-detail-modal",[]).controller("NumberDetailModalController",["$scope","Test","$uibModalInstance","params",function($scope,Test,$uibModalInstance,params){$scope.controlSelected={sms:params.isSMSEnabled?"selected":"",cli:params.isCliNumber?"selected":"",reach:params.isReachMeNumber?"selected":""},$scope.numberDetails=params,$scope.updateControls=function(customerID,type,knowServiceId){switch(type){case"cli":""==$scope.controlSelected.cli&&Test.updateCliNumber(customerID,knowServiceId).then(function(response){"success"==response.data.status?($scope.controlSelected.cli="selected",console.log("success")):$scope.controlSelected.cli=""});break;case"sms":$scope.controlSelected.sms="selected"==$scope.controlSelected.sms?"":"selected";break;case"reach":$scope.controlSelected.reach="selected"==$scope.controlSelected.reach?"":"selected";break;case"ciinumber":$scope.controlSelected.ciinumber="selected"==$scope.controlSelected.ciinumber?"":"selected"}},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.removePhone=function(){$scope.controlSelected.removed=!0},$scope.restorePhone=function(){$scope.controlSelected.removed=!1}}]),angular.module("package-detail-modal",[]).controller("PackageDetailModalController",["$scope","Test","$uibModalInstance","params",function($scope,Test,$uibModalInstance,params){$scope.packageDetail=params,$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("personal-information-modal",[]).controller("PersonalInformationModalController",["$scope","$uibModalInstance","params","Test","Tools",function($scope,$uibModalInstance,params,Test,Tools){$scope.accountNumber=47115,$scope.employee=params,$scope.updateCustomerInfo=function(){Test.editEmployee($scope.employee).then(function(response){"success"==response.data.status?$uibModalInstance.close(response.data.employeeInformation):$uibModalInstance.close(response.data.error),console.log(response.data)},function(response){console.log("Is not possible to update the user at this time. Please try again later"),$uibModalInstance.close(!1)})},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("purchase-number-modal",[]).controller("ModalPurchaseNumberController",["$scope","$uibModalInstance","params","SMbaseproject","Tools",function($scope,$uibModalInstance,params,SMbaseproject,Tools){function _init(){_getAllDidCountries()}function _onChange_country(newval){$scope.cities=void 0,$scope.citySelected=void 0,$scope.stateSelected=void 0,$scope.states=void 0,_checkIfCanBuy(),_setPrice(0,0),"true"==newval.hasStates?_getStates(newval.countryName,newval.countryId,newval.countryType,newval.didProvider):"national"!=newval.countryType?_getCities(newval.countryName,newval.countryId,newval.countryType,newval.didProvider):_getDidPricing(newval.countryName)}function _onChange_state(newval){$scope.cities=void 0,$scope.citySelected=void 0,_setPrice(0,0),_checkIfCanBuy();var countryName=$scope.countrySelected.countryName,countryId=$scope.countrySelected.countryId,countryType=$scope.countrySelected.countryType,didProvider=$scope.countrySelected.didProvider;_getCities(countryName,countryId,countryType,didProvider,newval.stateName)}function _onChange_city(newval){_setPrice(newval.setupPrice,newval.monthlyPrice),_checkIfCanBuy()}function _onChange_option(newval){_checkIfCanBuy()}function _getStates(country,countryId,didType,didProvider){SMbaseproject.getStates(customerID,country,countryId,didType,didProvider).then(function(response){"success"===response.data.status?($scope.states=response.data.data,$scope.states.splice(0,0,{stateName:"Select a state"}),$scope.stateSelected=$scope.states[0]):console.error(response.data.error)},function(response){console.error(response)})}function _getCities(country,countryId,didType,didProvider,state){SMbaseproject.getCities(customerID,country,countryId,didType,didProvider,state).then(function(response){"success"===response.data.status?($scope.cities=response.data.data,angular.forEach($scope.cities,function(value,key){value.newCityName=value.cityName+" ("+value.areacode+")"}),$scope.cities.splice(0,0,{newCityName:"Select a city"}),$scope.citySelected=$scope.cities[0]):console.error(response.data.error)},function(response){console.error(response)})}function _getAllDidCountries(){SMbaseproject.getAllDidCountries(customerID).then(function(response){"success"===response.data.status?($scope.countries=response.data.data,$scope.countries.splice(0,0,{countryName:"Select a country"}),$scope.countrySelected=$scope.countries[0]):console.error(response.data.error)},function(response){console.error(response)})}function _checkIfCanBuy(){$scope.optionSelected&&($scope.countrySelected?"true"==$scope.countrySelected.hasStates?$scope.stateSelected&&$scope.citySelected?$scope.buyButtonDisabled=!1:$scope.buyButtonDisabled=!0:"national"==$scope.countrySelected.countryType?$scope.buyButtonDisabled=!1:$scope.citySelected?$scope.buyButtonDisabled=!1:$scope.buyButtonDisabled=!0:$scope.buyButtonDisabled=!0)}function _setPrice(oneTimeFee,montlyCost){$scope.purchaseNumber={oneTimeFee:Tools.centsToDollars(oneTimeFee),monthlyCost:Tools.centsToDollars(montlyCost),total:(parseFloat(Tools.centsToDollars(oneTimeFee))+parseFloat(Tools.centsToDollars(montlyCost))).toFixed(2)}}function _purchase(customerID,city,country,didId,mf,paymentType,serviceType,token,totalAmount){SMbaseproject.purchase(customerID,city,country,didId,mf,paymentType,serviceType,token,totalAmount).then(function(response){"success"===response.data.status?($uibModalInstance.close(response.data),console.log("success")):console.log("response.data.error")},function(response){console.error(response)})}function _buyNumber(){var countryName=$scope.countrySelected.countryName;if($scope.citySelected)var cityName=$scope.citySelected.cityName,didId=$scope.citySelected.did_id;else var cityName="",didId=$scope.did_id;var mf=$scope.optionSelected.value,paymentType="BALANCE",serviceType=$scope.optionSelected.value?"FORWARDING":"FREE_FORWARDING",token="",totalAmount=0;_purchase(customerID,cityName,countryName,didId,mf,paymentType,serviceType,token,totalAmount)}function _getDidPricing(countryName){SMbaseproject.getDIDPricing(customerID,countryName).then(function(response){"success"===response.data.status?(_setPrice(response.data.costPackage.setupPrice,response.data.costPackage.monthlyPrice),$scope.didId=response.data.costPackage.did_id):console.error("problem to do the call")},function(response){console.error("error trying to get did Pricing")})}function _cancel(){$uibModalInstance.dismiss("cancel")}var customerID=params;$scope.buyButtonDisabled=!0,$scope.cities=void 0,$scope.citySelected=void 0,$scope.purchaseOptions=[{value:"",name:"Choose an option"},{value:0,name:"Buy for them"},{value:1,name:"1 Month Free"},{value:2,name:"2 Month Free"},{value:3,name:"3 Month Free"},{value:4,name:"4 Month Free"},{value:5,name:"5 Month Free"},{value:6,name:"6 Month Free"},{value:7,name:"7 Month Free"},{value:8,name:"8 Month Free"},{value:9,name:"9 Month Free"},{value:10,name:"10 Month Free"},{value:11,name:"11 Month Free"},{value:12,name:"12 Month Free"}],$scope.optionSelected=$scope.purchaseOptions[0],$scope.purchaseNumber={oneTimeFee:"0.00",monthlyCost:"0.00",total:"0.00"},$scope.onChange_country=_onChange_country,$scope.onChange_state=_onChange_state,$scope.onChange_city=_onChange_city,$scope.onChange_option=_onChange_option,$scope.cancel=_cancel,$scope.buyNumber=_buyNumber,$scope.getDidPricing=_getDidPricing,_init()}]),angular.module("purchase-package-modal",[]).controller("ModalPurchasePackageController",["$scope","$uibModalInstance","params","Test","SMbaseproject","DateTools",function($scope,$uibModalInstance,params,Test,SMbaseproject,DateTools){$scope.customerID=params,$scope.buyPackageDisabled=!0,$scope.packageSelected="",Test.getBuyablePackages(params).then(function(response){"success"===response.data.status?($scope.packages=response.data.packagesAvailablePackage,$scope.packageSelected=$scope.packages[0]):console.error(response.data.error)},function(response){console.error("error calling buyable packages")}),$scope.purchase=function(customerID,city,country,didId,mf,paymentType,serviceType,token,totalAmount,pid,ad,pCount,pDur){SMbaseproject.purchase(customerID,city,country,didId,mf,paymentType,serviceType,token,totalAmount,pid,ad,pCount,pDur).then(function(response){"success"===response.data.status?$uibModalInstance.close("buy-package"):console.error(response.data.error)},function(response){console.error("error calling buyable packages")})},$scope.numberOfPackages=[{value:1},{value:2},{value:3},{value:4},{value:5},{value:6}],$scope.numberSelected=$scope.numberOfPackages[0],$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.checkIfCanBuy=function(){$scope.packageSelected&&$scope.dateStart&&$scope.numberSelected&&$scope.serviceType?$scope.buyPackageDisabled=!1:$scope.buyPackageDisabled=!0},$scope.$watch("packages",function(newval,oldval){newval&&$scope.checkIfCanBuy()}),$scope.buyPackage=function(){var city="",country="",didId=void 0,mf=0,ad=DateTools.formatDate($scope.dateStart,"yyyy/mm/dd hh:mm:ss"),paymentType="BALANCE",serviceType=$scope.serviceType,pid=$scope.packageSelected.packageId,pCount=$scope.numberSelected.value,pDur=$scope.packageSelected.packageDuration,totalAmount=0,token="";$scope.purchase($scope.customerID,city,country,didId,mf,paymentType,serviceType,token,totalAmount,pid,ad,pCount,pDur)},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("sim-swap-modal",[]).controller("ModalSimSwapController",["$scope","$uibModalInstance","params","Test","SMbaseproject","DateTools",function($scope,$uibModalInstance,params,Test,SMbaseproject,DateTools){var customerID=params;$scope.simSwap=function(iccid){Test.iccidSwap(customerID,iccid).then(function(response){"success"===response.data.status?(console.log("iccd swap success"),$uibModalInstance.close()):console.log(response.data.error)},function(response){console.log("server error")})},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("account-topup",[]).controller("AccountTopUpController",["$scope","$rootScope","Tools","SMbaseproject","$stateParams","Test","Corporate","SMbaseproject",function($scope,$rootScope,Tools,SMbaseproject,$stateParams,Test,Corporate,SMbaseproject){function _init(){$scope.$emit("get-employee",$scope.customerID),_callPaymentInformation($scope.customerID),_callTopupAmountList($scope.customerID)}function _callTopupAmountList(customerID){Test.getTopupAmountList($scope.customerID).then(function(response){if("success"==response.data.status){console.log(response);for(var i=0;i<response.data.topupAmountsInCents.length;i++)$scope.amounts.push({id:i+1,value:response.data.topupAmountsInCents[i]})}else console.log(response.data.error)},function(response){console.log("error")})}function _callPaymentInformation(customerID){Test.getPaymentInformation(customerID,SERVICEID).then(function(response){"success"==response.data.status?console.log(response):console.log(response.data.error)},function(response){console.log("error")})}var SERVICEID=2;$scope.customerID=$stateParams.id,$scope.loading="",$scope.msgResponse={},$scope.topup={},$scope.topup.amount=0,$scope.topup.tax=1,$scope.topup.total=0,$scope.creditCard="**** **** **** ****",$scope.taxRate=1,$scope.creditCard&&($scope.creditCard.number="**** **** **** "+$scope.creditCard.last4),$scope.topup.processFinished=!1,$scope.topup.selectPayment=0,$scope.topup.selectPaymentOptions={},$scope.topup.selectPaymentOptions.card=1,$scope.topup.selectPaymentOptions.free=2,$scope.amounts=[{id:0,value:"Select topup amount"}],$scope.amountSelected=$scope.amounts[0],$scope.selectPaymentSource=function(type){$scope.topup.selectPayment=type},$scope.purchaseTopUp=function(){$scope.loading="whirl traditional"},$scope.onChange_amountRange=function(amount){$scope.amountSelected=amount,$scope.topup.amount=$scope.amountSelected.value,$scope.topup.tax=parseFloat(($scope.amountSelected.value*$scope.taxRate).toFixed(2)),$scope.topup.total=$scope.topup.amount+$scope.topup.tax},$scope.popupcard={templateUrl:"popupcard.html"},_init()}]),angular.module("krApp.constant",[]).constant("CONSTANTS",function(){var debug=!1;return debug?endpoint="http://localhost:5555/linea_base_dash_ang_v2.0/":endpoint="http://localhost:5555/linea_base_dash_ang_v2.0/",{ENVIROMENT_DEBUG_SESS:debug,ENDPOINT_URI:endpoint,DIR_PATH:"../",DIRECTIVE_PATH:"../app/common/directives/",ICON_PATH:"./assets/imageIcons/",IMAGE_PATH:"./assets/",CURRENCY_SIGN:"$",PAGINATION_MAX_NUMBER:25,AUTH_EVENTS:{notAuthenticated:"auth-not-authenticated"}}}()),angular.module("accountControlDirectives",[]).directive("accountControls",["CONSTANTS",function(CONSTANTS){return{restrict:"E",scope:{controls:"=",sel:"&"},templateUrl:CONSTANTS.DIRECTIVE_PATH+"accountControls/accountControls.tlp.html",link:function(scope,elem,attrs){scope.fullwidth=!1,scope.fullwidth=scope.$eval(attrs.fullwidth)}}}]),angular.module("checkboxDirectives",[]).directive("checkBox",["CONSTANTS",function(CONSTANTS){return{restrict:"E",templateUrl:CONSTANTS.DIRECTIVE_PATH+"checkbox/checkbox.tlp.html",scope:{toggles:"=",selItem:"&"},link:function(scope,elem,attrs){scope.text=attrs.text}}}]),angular.module("dateSelectionDirectives",[]).directive("dateSelection",["CONSTANTS",function(CONSTANTS){return{restrict:"E",templateUrl:CONSTANTS.DIRECTIVE_PATH+"dateSelection/dateSelection.tlp.html",scope:{daterange:"="},link:function(scope,elem,attrs){function mapRangeToString(){angular.forEach(scope.dateTextMapping,function(value,key){value==scope.daterange&&(scope.datestring=key)})}scope.dateTextMapping={"Last 24 Hours":1,"Last 7 Days":7,"Last 30 Days":30,"Last 3 Months":90,"This Year":365},mapRangeToString(),scope.updateDateRange=function(daterange){scope.daterange=daterange,mapRangeToString(),angular.element(elem[0].querySelectorAll(".dropdown-content")).toggleClass("active")},$(document).click(function(){angular.element(elem[0].querySelectorAll(".dropdown-content")).removeClass("active")}),scope.toggleDateMenu=function(event){event.preventDefault(),event.stopPropagation(),angular.element(elem[0].querySelectorAll(".dropdown-content")).toggleClass("active")}}}}]),angular.module("graficosDirectives",[]).directive("graphGroupBar",["CONSTANTS","$timeout",function(CONSTANTS,$timeout){return{restrict:"E",template:'<div><div id="{{idcmp}}" style="min-width: {{width}}px; height: {{height}}px; margin: 0 auto"></div></div>',scope:{idcmp:"@",width:"@",height:"@",title:"@",yaxistext:"@",series:"=",categories:"="},link:{post:function(scope,elem,attrs){$timeout(function(){$("#"+scope.idcmp).highcharts({colors:["#32B513","#FF5000"],chart:{type:"column"},title:{text:scope.title},credits:{enabled:!1},exporting:{enabled:!1},xAxis:{categories:scope.categories,crosshair:!0},yAxis:{min:0,title:{text:scope.yaxistext}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:scope.series})}),console.log(11,$("#"+scope.idcmp))}}}}]).directive("graphPieChart",["CONSTANTS","$timeout",function(CONSTANTS,$timeout){return{restrict:"E",template:'<div><div id="{{idcmp}}" style="min-width: {{width}}px; height: {{height}}px; margin: 0 auto"></div></div>',scope:{idcmp:"@",width:"@",height:"@",title:"@",yaxistext:"@",series:"=",colors:"="},link:{post:function(scope,elem,attrs){$timeout(function(){var obj={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},credits:{enabled:!1},exporting:{enabled:!1},title:{text:scope.title},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",showInLegend:!0,dataLabels:{enabled:!1,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{name:scope.title,colorByPoint:!0,data:scope.series}]};scope.colors&&(obj.colors=scope.colors),$("#"+scope.idcmp).highcharts(obj)})}}}}]),angular.module("krApp.directives",["checkboxDirectives","accountControlDirectives","dateSelectionDirectives","graficosDirectives"]).filter("startFrom",function(){return function(input,start){return input?(start=+start,input.slice(start)):[]}}).directive("icheck",function($timeout,$parse){return{require:"ngModel",link:function(scope,element,$attrs,ngModel){return $timeout(function(){var value;value=$attrs.value;var stype="square"==$attrs.stype?"icheckbox_minimal-blue":"iradio_square-blue";return console.log(1,stype),scope.$watch($attrs.ngModel,function(newValue){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:stype,radioClass:"iradio_flat-blue"}).on("ifChanged",function(event){return"checkbox"===$(element).attr("type")&&$attrs.ngModel&&scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)}),"radio"===$(element).attr("type")&&$attrs.ngModel?scope.$apply(function(){return ngModel.$setViewValue(value)}):void 0})})}}}).directive("wrapper",["sbaseproject","$timeout","$rootScope","$timeout",function(sbaseproject,$timeout,$rootScope,$timeout){return{restrict:"C",link:function(scope,elem,attrs){scope.$on("$stateChangeSuccess",function(scope,next,current){"/login"==next.url?($("body").addClass("close-bars fix-login sidebar-collapse"),$("body .content-wrapper").css("min-height",965),$("body").removeClass("sidebar-open")):$("body").removeClass("close-bars fix-login sidebar-collapse"),fix(),fixSidebar()}),$(window,".wrapper").resize(function(){fix(),fixSidebar()});var fix=function(){var neg=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),window_height=$(window).height(),sidebar_height=$(".sidebar").height();if($("body").hasClass("fixed"))$(".content-wrapper, .right-side").css("min-height",window_height-$(".main-footer").outerHeight());else{var postSetWidth;window_height>=sidebar_height?($(".content-wrapper, .right-side").css("min-height",window_height-neg),postSetWidth=window_height-neg):($(".content-wrapper, .right-side").css("min-height",sidebar_height),postSetWidth=sidebar_height);var controlSidebar=$($.AdminLTE.options.controlSidebarOptions.selector);"undefined"!=typeof controlSidebar&&controlSidebar.height()>postSetWidth&&$(".content-wrapper, .right-side").css("min-height",controlSidebar.height())}},fixSidebar=function(){return $("body").hasClass("fixed")?("undefined"==typeof $.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),void($.AdminLTE.options.sidebarSlimScroll&&"undefined"!=typeof $.fn.slimScroll&&($(".sidebar").slimScroll({destroy:!0}).height("auto"),$(".sidebar").slimscroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})))):void("undefined"!=typeof $.fn.slimScroll&&$(".sidebar").slimScroll({destroy:!0}).height("auto"))}}}}]).directive("mainSidebar",["sbaseproject",function(sbaseproject){return{restrict:"C",link:function(scope,elem,attrs){if(sbaseproject.options.enableControlSidebar){var screenSizes=sbaseproject.options.screenSizes;$(".sidebar-toggle").on("click",function(e){e.preventDefault(),$(window).width()>screenSizes.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")})}}}}]).directive("toggleBalance",["sbaseproject","$timeout",function(sbaseproject,$timeout){return{restrict:"C",link:function(scope,elem,attrs){elem.on("click",function(){$(".balance-option").stop().slideToggle(200)})}}}]).directive("controlSidebar",["sbaseproject","$timeout",function(sbaseproject,$timeout){return{restrict:"C",link:function(scope,elem,attr){$timeout(function(){var o=sbaseproject.options.controlSidebarOptions,sidebar=$(o.selector),btn=$(o.toggleBtnSelector),bg=$(".control-sidebar-bg");scope.fix(bg),$("body").hasClass("fixed")?scope.fixForFixed(sidebar):$(".content-wrapper, .right-side").height()<sidebar.height()&&scope.fixForContent(sidebar),btn.on("click",function(e){e.preventDefault(),sidebar.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?scope.close(sidebar,o.slide):scope.open(sidebar,o.slide)}),scope.setup()}),scope.open=function(sidebar,slide){slide?sidebar.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},scope.close=function(sidebar,slide){slide?sidebar.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},scope.fix=function(sidebar){$("body").hasClass("layout-boxed")?(sidebar.css("position","absolute"),sidebar.height($(".wrapper").height()),$(window).resize(function(){scope.fix(sidebar)})):sidebar.css({position:"fixed",height:"auto"})},scope.fixForFixed=function(sidebar){sidebar.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},scope.fixForContent=function(sidebar){$(".content-wrapper, .right-side").css("min-height",sidebar.height())},scope.change_layout=function(cls){$("body").toggleClass(cls),"layout-boxed"==cls&&scope.fix($(".control-sidebar-bg")),$("body").hasClass("fixed")&&"fixed"==cls&&sbaseproject.pushMenu.expandOnHover(),scope.fix($(".control-sidebar-bg")),scope.fix($(".control-sidebar"))},scope.change_skin=function(cls){return $.each(sbaseproject.options.skins,function(i){$("body").removeClass(sbaseproject.options.skins[i])}),$("body").addClass(cls),scope.store("skin",cls),!1},scope.store=function(name,val){"undefined"!=typeof Storage?localStorage.setItem(name,val):window.alert("Please use a modern browser to properly view this template!")},scope.get=function(name){return"undefined"!=typeof Storage?localStorage.getItem(name):void window.alert("Please use a modern browser to properly view this template!")},scope.setup=function(){var tmp=scope.get("skin");tmp&&$.inArray(tmp,sbaseproject.options.my_skins)&&scope.change_skin(tmp),$("[data-skin]").on("click",function(e){e.preventDefault(),scope.change_skin($(this).data("skin"))}),$("[data-layout]").on("click",function(){scope.change_layout($(this).data("layout"))}),$("[data-controlsidebar]").on("click",function(){scope.change_layout($(this).data("controlsidebar"));var slide=!sbaseproject.options.controlSidebarOptions.slide;sbaseproject.options.controlSidebarOptions.slide=slide,slide||$(".control-sidebar").removeClass("control-sidebar-open")}),$("[data-sidebarskin='toggle']").on("click",function(){var sidebar=$(".control-sidebar");sidebar.hasClass("control-sidebar-dark")?(sidebar.removeClass("control-sidebar-dark"),sidebar.addClass("control-sidebar-light")):(sidebar.removeClass("control-sidebar-light"),sidebar.addClass("control-sidebar-dark"))}),$("[data-enable='expandOnHover']").on("click",function(){$(this).attr("disabled",!0),sbaseproject.pushMenu.expandOnHover(),$("body").hasClass("sidebar-collapse")||$("[data-layout='sidebar-collapse']").click()}),$("body").hasClass("fixed")&&$("[data-layout='fixed']").attr("checked","checked"),$("body").hasClass("layout-boxed")&&$("[data-layout='layout-boxed']").attr("checked","checked"),$("body").hasClass("sidebar-collapse")&&$("[data-layout='sidebar-collapse']").attr("checked","checked")}}}}]).directive("responsiveTable",["$compile","$filter",function($compile,$filter){return{restrict:"A",scope:!1,compile:function(elem,attrs){attrs.$addClass("responsive");var headerHtmlList="";angular.forEach(elem.find("th"),function(value,key){var eachHeader=angular.element(value),eachHeaderTitle=eachHeader.html(),sortCol=eachHeader.data("sort");sortCol&&(headerHtmlList+='<li data-sort="'+sortCol+'" ng-click="sortByColumn($event);updateText($event)">'+eachHeader[0].innerText+"</li>",eachHeader.html('<div class="header-wrapper sort">'+eachHeaderTitle+'&nbsp;<i class="fa fa-sort"></i><i class="fa fa-sort-asc"></i><i class="fa fa-sort-desc"></i></div>'))});var sortDropDown='<div class="filter-wrapper"> ';sortDropDown+='<div ng-click="toggleDropdown($event)" class="filter-dropdown-current btn btn-primary btn-round">Sort By: <b><span class="current-col-text">{{sortColText}}</span><b> <i class="fa fa-caret-down"></i></div>',sortDropDown+='<ul class="filter-dropdown">',sortDropDown+=headerHtmlList,sortDropDown+="</ul>",sortDropDown+="</div>";var table=elem.find("table");table.before(sortDropDown)},controller:function($scope,$element){$element.find("[data-sort]").click(function(){if($scope.sort==$(this).data("sort")){$scope.direction="DESC"==$scope.direction?"ASC":"DESC";var directionClass="DESC"==$scope.direction?"desc":"asc";$(this).find(".header-wrapper").attr("class","header-wrapper").addClass(directionClass)}else $scope.direction="DESC",$element.find(".header-wrapper").attr("class","header-wrapper sort"),$(this).find(".header-wrapper").attr("class","header-wrapper").addClass("desc");$scope.sort=$(this).data("sort"),$(".filter-dropdown").removeClass("active")}),$scope.toggleDropdown=function(event){var dropdown=$(event.target).parent().find(".filter-dropdown");dropdown.toggleClass("active")},$scope.updateText=function(event){$scope.sortColText=event.currentTarget.innerText}}}}]).directive("customDropDown",[function(){return{restrict:"E",scope:{list:"=",elem:"=",title:"@",size:"@",label:"@"},template:'<div class="dropdownmenu-wrapper"><div class="dropdownmenu ng-binding" ng-click="toggleTabMenu($event)">{{title}}</div><ul class="dropdown-content"><li ng-repeat="item in list" ng-click="itemSelected($index)">{{item[label]}}</li></ul></div></div>',link:function(scope,elem,attrs){scope.element=elem,scope.itemSelected=function(idx){scope.element.find(".dropdown-content").removeClass("active"),scope.element.find(".dropdownmenu").html(scope.list[idx][scope.label]),scope.elem=scope.list[idx]},scope.elem&&angular.forEach(scope.list,function(value,key){angular.equals(scope.elem,value)&&scope.itemSelected(key)}),scope.$watch("list",function(newval,oldval){angular.equals(newval,oldval)||(scope.element.find(".dropdownmenu").html(scope.title),scope.elem=void 0)}),$(document).click(function(){scope.element.find(".dropdown-content").removeClass("active")}),scope.toggleTabMenu=function(event){event.preventDefault(),event.stopPropagation(),scope.element.find(".dropdown-content").toggleClass("active")},"small"==scope.size&&elem.find(".dropdownmenu-wrapper").addClass("dropdownmenu-sm")}}}]).directive("iconTag",[function(){return{restrict:"A",link:function(scope,elem,attr){scope.$eval(attr.iconTag)?elem.addClass("active"):elem.removeClass("active")}}}]).directive("triggerPopoverClose",[function(){return{restrict:"A",link:function(scope,elem,attrs){elem.on("click",function(event){angular.element("#"+attrs.triggerPopoverClose).trigger("click")})}}}]).directive("msgResponseStatus",[function(){return{restrict:"E",replace:!0,scope:{msg:"@",title:"@",isOk:"@"},template:"<div class=\"{{isOk=='true'?'text-kwsave':'text-red'}} text-center\">			<i class=\"fa {{isOk=='true'?'fa-check-circle':'fa-times-circle'}} fa-title-response\"></i>			<h1 class='fa-title-response.text'>{{title}}!</h1>			<h1>{{msg}}.</h1>		</div>"
}}]),angular.module("sideBarDirectives",[]).directive("sideBar",["$location","CONSTANTS","$rootScope",function($location,CONSTANTS,$rootScope){return{restrict:"E",templateUrl:CONSTANTS.DIRECTIVE_PATH+"sidebar/sidebar.tlp.html",link:function(scope,elem,attrs){$rootScope.$on("$routeChangeStart",function(args){$("#toggle-control").hide();var tab=$location.url().replace("/","");"account"==tab&&$("#toggle-control").show()}),$("#menu-control").click(function(){$("#mainNav").toggleClass("left-panel-active"),$("#mainNavMobile").toggleClass("left-panel-active"),$("#main-panel").toggleClass("left-panel-active")}),$("#toggle-control").click(function(){$("#controlNav").toggleClass("right-panel-active"),$("#mainNavMobile").toggleClass("right-panel-active"),$("#main-panel").toggleClass("right-panel-active")}),$(document).click(function(e){var target=e.target;$(target).is("#menu-control")||$(target).is("#mainNav")||$(target).parents().is("#mainNav")||$(target).is("#toggle-control")||$(target).is("#controlNav")||$(target).parents().is("#controlNav")||($("#mainNav").removeClass("left-panel-active"),$("#mainNavMobile").removeClass("left-panel-active"),$("#main-panel").removeClass("left-panel-active"),$("#controlNav").removeClass("right-panel-active"),$("#mainNavMobile").removeClass("right-panel-active"),$("#main-panel").removeClass("right-panel-active"))})}}}]),angular.module("krApp.filters",[]).filter("capitalize",function(){return function(input){return input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():""}}).filter("novalue",function(){return function(input){return input?input:"N/A"}}).filter("noselection",function(){return function(input){return input?input:"Sin Seleccin"}}).filter("cleandots",function(){return function(input){return input.replace(/\./g,"")}}).filter("msdate",function(){var re=/\/Date\(([0-9]*)\)\//;return function(x){var m=x.match(re);return m?new Date(parseInt(m[1])):null}}),angular.module("krApp.factories",[]).factory("modalFactory",function($uibModal){var enableAnimation=!0;return{open:function(template,controller,size,params){return $uibModal.open({backdrop:"static",keyboard:!1,animation:enableAnimation,templateUrl:template,controller:controller,size:size,resolve:{params:function(){return params}}})}}}).controller("ModalConfirmPromptInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.title=params.title,$scope.body=params.body,$scope.confirm=function(){$uibModalInstance.close(!0)},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("krApp.services",[]).service("AJAX",["$http","CONSTANTS","$state","$rootScope","$localStorage",function($http,CONSTANTS,$state,$rootScope,$localStorage){this.error=function(){"Session is Expired"==result.data.error&&(console.log("DELETE STORAGE FALSE"),delete $localStorage.uid)},this.genParams=function(command){return CONSTANTS.ENDPOINT_URI+command},this.post=function(params){this.endpoint=this.genParams(params.command);var promise=$http.post(this.endpoint,$.param(params)).then(function(result){return"false"==result.data.status&&this.error(),result});return promise},this.get=function(params){this.endpoint=this.genParams(params.command);var promise=$http({url:this.endpoint,method:"GET",params:params});return promise.then(function(result){return"false"==result.data.status&&this.error(),result}),promise}}]).service("SessionParams",["$localStorage",function($localStorage){this.get=function(){if($localStorage.uid){var params={};return params.token=$localStorage.uid.token,params.is_ok=$localStorage.uid.is_ok,params.email=$localStorage.uid.email,params}return!1}}]).service("BasicAPIObject",["SessionParams",function(SessionParams){this.get=function(command,model){var params={command:command,model:model,ver:"4"};return angular.extend(params,SessionParams.get()),params}}]).service("Test",["AJAX","BasicAPIObject","$cookies","CONSTANTS",function(AJAX,BasicAPIObject,$cookies,CONSTANTS){var MODEL="test";this.getPostsSummary=function(startingPosition,extra_param_2){var params=BasicAPIObject.get("posts/",MODEL);return params.startingPosition=startingPosition,params.extra_param_2=extra_param_2,params.maxResults=CONSTANTS.PAGINATION_MAX_NUMBER,AJAX.get(params)}}]).service("Unidades",["AJAX","BasicAPIObject","$cookies","CONSTANTS","$localStorage",function(AJAX,BasicAPIObject,$cookies,CONSTANTS,$localStorage){var MODEL="Unidades";this.getUnidades=function(){var params=BasicAPIObject.get("local_services/EV_COMBO_UNIDADES.json",MODEL);return AJAX.get(params)}}]).service("Enrolado",["AJAX","BasicAPIObject","$cookies","CONSTANTS","$localStorage",function(AJAX,BasicAPIObject,$cookies,CONSTANTS,$localStorage){var MODEL="Enrolado";this.getListadoEnroladosA=function(pos,filtro){var params=BasicAPIObject.get("local_services/EV_ENROLADOS_A.json",MODEL);return params.v_pagesize=10,params.v_pageindex=pos?pos-1:0,params.v_sortcolumn="",params.v_categ=0,params.v_run_nombre=filtro?filtro:"",AJAX.get(params)}}]).service("Admin",["AJAX","BasicAPIObject","CONSTANTS",function(AJAX,BasicAPIObject,CONSTANTS){var MODEL="admin";this.login=function(email,password){var params=BasicAPIObject.get("local_services/login.json",MODEL);return params.v_usuario=email,params.v_pass=password,AJAX.get(params)}}]).service("AuthService",["$q","$http","CONSTANTS","$localStorage","Admin","$rootScope",function($q,$http,CONSTANTS,$localStorage,Admin,$rootScope){function loadUserCredentials(){var data=$localStorage.uid,token=data?data.token:"";$localStorage.uid&&($rootScope.currentUser.email=$localStorage.uid.email),token&&useCredentials(token)}function storeUserCredentials(uid){$localStorage.uid=uid,useCredentials(uid.token)}function useCredentials(token){isAuthenticated=!0,authToken=token}function destroyUserCredentials(){authToken=void 0,isAuthenticated=!1,$http.defaults.headers.common.Authorization=void 0,delete $localStorage.uid}function changeViewUnidad(unidadTXT,unidad){$localStorage.uid.unidadTXT=unidadTXT,$localStorage.uid.unidad=unidad,$rootScope.currentUser.unidadTXT=unidadTXT,$rootScope.currentUser.unidad=unidad}var authToken,isAuthenticated=!1;$rootScope.currentUser={};var login=function(user){return $q(function(resolve,reject){if(1==CONSTANTS.ENVIROMENT_DEBUG_SESS){var uid={is_ok:!0,token:"a_pk_test_FP6nP52blSBuAseHpBBNkk3H",email:"alb@gmail.cl"};return storeUserCredentials(uid),void resolve(uid)}Admin.login(user.email,user.password).then(function(result){if(1==result.data.success){var uid={is_ok:!0,token:result.data.email+result.data.user,email:result.data.email};storeUserCredentials(uid),resolve(result.data)}else reject(result.data.error)},function(){reject("Error en el servidor")})})},logout=function(){destroyUserCredentials()};return loadUserCredentials(),{login:login,logout:logout,changeViewUnidad:changeViewUnidad,isAuthenticated:function(){return isAuthenticated}}}]).factory("AuthInterceptor",["$rootScope","$q","CONSTANTS",function($rootScope,$q,CONSTANTS){return{responseError:function(response){return $rootScope.$broadcast({401:CONSTANTS.AUTH_EVENTS.notAuthenticated}[response.status],response),$q.reject(response)}}}]).service("Admin",["AJAX","BasicAPIObject","CONSTANTS",function(AJAX,BasicAPIObject,CONSTANTS){var MODEL="admin";this.login=function(email,password){var params=BasicAPIObject.get("local_services/login.json",MODEL);return params.v_usuario=email,params.v_pass=password,AJAX.get(params)}}]).service("sweetService",["CONSTANTS",function(CONSTANTS){this.error=function(list){for(var _tmp="<center><div class='' style='text-align: left;width:200px'>",i=0;i<list.length;i++)_tmp+="<br /><li style='color:red'>Verfique: "+list[i];_tmp+="</div></center>",swal({title:"Error!",text:""+_tmp,type:"error",html:!0,confirmButtonText:"CERRAR"})}}]).service("formatValidateService",["CONSTANTS",function(CONSTANTS){var _dv=function(T){for(var M=0,S=1;T;T=Math.floor(T/10))S=(S+T%10*(9-M++%6))%11;return S?S-1:"k"};this.rut=function(prut){if(console.log("rut::"+prut),prut=prut.replace(/\./g,""),!/^[0-9]+-[0-9kK]{1}$/.test(prut))return!1;var tmp=prut.split("-"),digv=tmp[1],rut=tmp[0];return"K"==digv&&(digv="k"),_dv(rut)==digv},this.mail=function(valor){console.log("MAIL:"+valor);var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(valor)}}]).service("formatService",["CONSTANTS",function(CONSTANTS){this.ucfirst=function(input){return input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():""},this.msformat=function(x){var _re=/\/Date\(([0-9]*)\)\//,m=x.match(_re);return m?new Date(parseInt(m[1])):null}}]).service("validateFormService",["CONSTANTS","formatService",function(CONSTANTS,format){this.generateCombo=function(form){var _list={};for(var name in form)"object"==typeof form[name]&&(_list[name]=[],_list[name]=[{id:0,nombre:"Seleccione "+format.ucfirst(name)}],form[name]=_list[name][0]);return _list},this.validateNull=function(form,exceptions){var _listError=[],_exceptions=exceptions||[];for(var name in form)-1==_exceptions.indexOf(name)&&("object"==typeof form[name]?0==form[name].id&&_listError.push(format.ucfirst(name)):form[name]||_listError.push(format.ucfirst(name)));return _listError}}]).service("sbaseproject",[function(){var options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!1,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!0,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200},skins:["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"]},pushMenu={activate:function(toggleBtn){var screenSizes=options.screenSizes;$(toggleBtn).on("click",function(e){e.preventDefault(),$(window).width()>screenSizes.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),$(".content-wrapper").click(function(){$(window).width()<=screenSizes.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),(options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var _this=this,screenWidth=options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>screenWidth&&_this.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>screenWidth&&_this.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}};return{options:options,pushMenu:pushMenu}}]).service("Tools",function(toaster,CONSTANTS){this.secondToMinutes=function(timeInSeconds){var minutes=parseInt(timeInSeconds/60);return minutes},this.getPastDate=function(days){return moment().subtract(days,"days").format("YYYY/MM/DD hh:mm")},this.centsToDollars=function(cents){var dollars;return cents=parseInt(cents),dollars=parseFloat(cents/100).toFixed(2)},this.dollarsToCents=function(dollars){var cents;return dollars=parseFloat(dollars),cents=parseInt(100*dollars)},this.dollarFormated=function(dollars){return dollars=parseFloat(dollars).toFixed(2)},this.phoneNumberFormat=function(phoneNumber){return phoneNumber.replace(/(\d{1,3})(\d{3})(\d{3})(\d{4})/,"+$1 $2-$3-$4")},this.getBytesString=function(bytes){var bytes;return 1024>bytes?bytes+" bytes":1048576>bytes?(bytes/=1024,bytes=parseInt(bytes),bytes+" KB"):(bytes/=1048576,bytes=parseInt(bytes),bytes+" MB")},this.getBytesUsageIconFlag=function(bytes){var benchmark1=5242880,benchmark2=10485760;return benchmark1>=bytes?"low":bytes>benchmark1&&benchmark2>=bytes?"medium":"high"},this.getNumbersFromString=function(str){return str.match(/\d+/)},this.decodeFields=function(obj){var newObj={};return angular.forEach(obj,function(value,key){"string"==typeof value&&(value=decodeURIComponent(value.replace(/\+/g," "))),this[key]=value},newObj),newObj},this.getPaginationStartPosition=function(currentPage){return 1==currentPage?0:(currentPage-1)*CONSTANTS.PAGINATION_MAX_NUMBER},this.showNotification=function(type,message){switch(type){case"success":toaster.success({title:"Success",body:message,showCloseButton:!0});break;case"error":toaster.error({title:"Error",body:message,showCloseButton:!0});break;default:alert("Please define a notification type")}};var connectionErrorCount=0;this.showConnectionDownNotification=function(){1>connectionErrorCount&&toaster.error({title:"Error",body:"Cannot communicate to the API service.",showCloseButton:!0,onShowCallback:function(){connectionErrorCount++},onHideCallback:function(){connectionErrorCount--}})}}).service("DateTools",function(){this.formatDate=function(date,format){var day=date.getDate()<10?"0"+date.getDate():date.getDate(),month=date.getMonth()+1;month=10>month?"0"+month:month;var year=date.getFullYear(),time=date.getHours()+":"+date.getMinutes()+":"+date.getSeconds();return"yyyy/mm/dd hh:mm:ss"==format?year+"/"+month+"/"+day+" "+time:void 0}}),angular.module("view-detail-modal",[]).controller("viewDetailModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("home",["krApp.constant","view-detail-modal"]).config(["$stateProvider","CONSTANTS",function($stateProvider,CONSTANTS){$stateProvider.state("home",{"abstract":!0,url:"/home",template:"<ui-view/>",controller:"HomeController",resolve:{enrolado_head_a:function(Enrolado){return Enrolado.getHeadEnroladosA()},enrolado_head_p:function(Enrolado){return Enrolado.getHeadEnroladosP()},enrolado_t_graph_p:function(Enrolado){return Enrolado.getGraphTotalEnroladosP()},enrolado_t_graph_a:function(Enrolado){return Enrolado.getGraphTotalEnroladosA()},enrolado_group_graph_p:function(Enrolado){return Enrolado.getGraphEnroladosP()},enrolado_group_graph_a:function(Enrolado){return Enrolado.getGraphEnroladosA()}}}).state("home.dashboard",{url:"/dashboard",templateUrl:CONSTANTS.DIR_PATH+"app/home/dashboard/home-dashboard.tpl.html",controller:"HomeController"})}]).controller("HomeController",["$scope","$stateParams","Enrolado","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","enrolado_head_a","enrolado_head_p","$localStorage","enrolado_t_graph_p","enrolado_t_graph_a","Unidades","AuthService","$state","enrolado_group_graph_a","enrolado_group_graph_p","modalFactory",function($scope,$stateParams,Enrolado,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,enrolado_head_a,enrolado_head_p,$localStorage,enrolado_t_graph_p,enrolado_t_graph_a,Unidades,AuthService,$state,enrolado_group_graph_a,enrolado_group_graph_p,modalFactory){function _init(){_getListadoEnroladosA(),_getListadoEnroladosP(),_getUnidades(),_loadGraphData()}function _openNoteModalSIAP(select,estado){var template=CONSTANTS.DIR_PATH+"app/home/dashboard/view-detail-modal.tpl.html",ctrl="viewDetailModalInstanceCtrl",size="sm",data={unidad:$localStorage.uid.unidadTXT,select:select,estado:estado},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _getUnidades(){Unidades.getUnidades().then(function(response){for(var i=0;i<response.data.data.length;i++)$scope.ddSelectUnidadOptions.push(response.data.data[i])},function(response){console.log(response.data)})}function _loadGraphData(){$scope.graph_piechart_fuerza_series=[];for(var i=0;i<enrolado_group_graph_a.data.data.length;i++)parseInt(enrolado_group_graph_a.data.data[i].TOTAL_POR_CATEGORIA,10)+parseInt(enrolado_group_graph_p.data.data[i].TOTAL_POR_CATEGORIA,10)>0&&$scope.graph_piechart_fuerza_series.push({name:enrolado_group_graph_a.data.data[i].CATEGORIA,y:parseInt(enrolado_group_graph_a.data.data[i].TOTAL_POR_CATEGORIA,10)+parseInt(enrolado_group_graph_p.data.data[i].TOTAL_POR_CATEGORIA,10)});for(var i=0;i<enrolado_group_graph_a.data.data.length;i++)$scope.graph_bar_categories.push(enrolado_group_graph_a.data.data[i].CATEGORIA);for(var i=0;i<enrolado_group_graph_a.data.data.length;i++)$scope.graph_bar_series[0].data.push(enrolado_group_graph_a.data.data[i].TOTAL_POR_CATEGORIA);for(var i=0;i<enrolado_group_graph_p.data.data.length;i++)$scope.graph_bar_series[1].data.push(enrolado_group_graph_p.data.data[i].TOTAL_POR_CATEGORIA)}function _getListadoEnroladosA(pos,filtro){Enrolado.getListadoEnroladosA(pos,filtro).then(function(response){$scope.enrolados_a=response.data.data,Enrolado.getHeadEnroladosA(filtro).then(function(r){$scope.ea_totalItems=r.data.total,$scope.ea_numPages=r.data.total>10?r.data.total/10:1})},function(response){console.log(response.data)})}function _getListadoEnroladosP(pos,filtro){Enrolado.getListadoEnroladosP(pos,filtro).then(function(response){$scope.enrolados_p=response.data.data,Enrolado.getHeadEnroladosP(filtro).then(function(r){$scope.ep_totalItems=r.data.total,$scope.ep_numPages=r.data.total>10?r.data.total/10:1})},function(response){console.log(response.data)})}function _searchDatabaseA(){_getListadoEnroladosA($scope.ea_currentPage,$scope.ea_input_buscar)}function _searchDatabaseP(){_getListadoEnroladosP($scope.ep_currentPage,$scope.ep_input_buscar)}function _sortByColumnA(event){var sortCol=$(event.target).data("sort")||$(event.target).parent().data("sort"),sortColText=$(event.target)[0].innerText||$(event.target).parent()[0].innerText;$scope.sort_order_a=sortCol==$scope.sort_a&&"desc"!=$scope.sort_order_a?"desc":"asc",$scope.sort_a=sortCol,$scope.sortColText_a=sortColText,console.log("A SORT: ",$scope.sort_a,$scope.sortColText_a,$scope.sort_order_a)}function _sortByColumnP(event){var sortCol=$(event.target).data("sort")||$(event.target).parent().data("sort"),sortColText=$(event.target)[0].innerText||$(event.target).parent()[0].innerText;$scope.sort_order_a=sortCol==$scope.sort_a&&"desc"!=$scope.sort_order_a?"desc":"asc",$scope.sort_a=sortCol,$scope.sortColText_a=sortColText,console.log("P SORT: ",$scope.sort_a,$scope.sortColText_a,$scope.sort_order_a)}function _onChange_unidad(select){$scope.mloading="whirl whirl-min duo",AuthService.changeViewUnidad(select.DESCRIPCION,select.CODIGO),$state.go("home.dashboard",{},{reload:!0})}$scope.mloading="",$scope.enrolados_a={},$scope.ea_currentPage=1,$scope.ea_totalItems=enrolado_head_a.data.total,$scope.ea_numPages=enrolado_head_a.data.total>10?enrolado_head_a.data.total/10:1,$scope.ea_startingPosition=Tools.getPaginationStartPosition($scope.ea_currentPage),$scope.enrolados_p={},$scope.ep_currentPage=1,$scope.ep_totalItems=enrolado_head_p.data.total,$scope.ep_numPages=enrolado_head_p.data.total>10?enrolado_head_p.data.total/10:1,$scope.ep_startingPosition=Tools.getPaginationStartPosition($scope.ep_currentPage),$scope.unidad=$localStorage.uid.unidadTXT,$scope.colors=["#32B513","#FF5000"],$scope.graph_bar_series=[{name:"Enrolados",data:[]},{name:"Pendientes",data:[]}],$scope.graph_bar_categories=[],$scope.graph_piechart_series=[{name:"Enrolados",y:parseInt(enrolado_t_graph_a.data.total,10)},{name:"Pendientes",y:parseInt(enrolado_t_graph_p.data.total,10),sliced:!0,selected:!0}],$scope.ddSelectUnidadSelected=null,$scope.ddSelectUnidadOptions=[{CODIGO:0,DESCRIPCION:"Filtrar, Seleccione una Unidad"}],$scope.ddSelectUnidadSelected=$scope.ddSelectUnidadOptions[0],$scope.init=_init,$scope.sortByColumnA=_sortByColumnA,$scope.sortByColumnP=_sortByColumnP,$scope.searchDatabaseA=_searchDatabaseA,$scope.searchDatabaseP=_searchDatabaseP,$scope.onChange_unidad=_onChange_unidad,$scope.openNoteModalSIAP=_openNoteModalSIAP,$scope.init(),$scope.$watch("ep_currentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.ep_startingPosition=Tools.getPaginationStartPosition($scope.ep_currentPage),_getListadoEnroladosP($scope.ep_currentPage,$scope.ep_input_buscar))}),$scope.$watch("ea_currentPage",function(newValue,oldValue){newValue!=oldValue&&($scope.ea_startingPosition=Tools.getPaginationStartPosition($scope.ea_currentPage),_getListadoEnroladosA($scope.ea_currentPage,$scope.ea_input_buscar))})}]),angular.module("login",["select-anio-login-modal","select-establecimiento-login-modal","select-sostenedor-login-modal"]).config(["$stateProvider","CONSTANTS",function($stateProvider,CONSTANTS){$stateProvider.state("login",{url:"/login",templateUrl:CONSTANTS.DIR_PATH+"app/login/login.tpl.html",controller:"LoginController"})}]).controller("LoginController",["$scope","$state","AuthService",function($scope,$state,AuthService){$scope.err_msg="",$scope.isError=0,$scope.isCargando=!1,$scope.user={email:"COP",password:""},$scope.login=function(user){$scope.isCargando=!0;var promise=AuthService.login(user);promise.then(function(result){console.log(result),$state.go("home.dashboard")},function(r){$scope.err_msg=r,$scope.isError=1,$scope.isCargando=!1})}}]),angular.module("select-anio-login-modal",[]).controller("selectanioModalInstanceCtrl",["$scope","$uibModalInstance","params","$rootScope","$localStorage","$sessionStorage",function($scope,$uibModalInstance,params,$rootScope,$localStorage,$sessionStorage){$scope.sdata=params,$scope.select={},$scope.select.extraOptionFilter=0,$scope.dataAnios=[{id:1,name:"2014"},{id:2,name:"2015"},{id:3,name:"2016"}],$scope.save=function(){$rootScope.seleccion.vanio=$scope.dataAnios[parseInt($scope.select.extraOptionFilter)],$rootScope.seleccion.anio=!1,console.log("vanio:::::"+$rootScope.seleccion.vanio),$sessionStorage.root||($sessionStorage.root={}),$sessionStorage.root.seleccion_anio={vanio:$rootScope.seleccion.vanio,anio:$rootScope.seleccion.anio},$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("select-establecimiento-login-modal",[]).controller("selectestablecimientoModalInstanceCtrl",["$scope","$uibModalInstance","params","$rootScope","$localStorage","$sessionStorage",function($scope,$uibModalInstance,params,$rootScope,$localStorage,$sessionStorage){$scope.sdata=params,$scope.select={},$scope.select.extraOptionFilter=0,$scope.dataEstablecimientos=[{id:1,name:"Establecimiento 1"},{id:2,name:"Establecimiento 2"},{id:3,name:"Establecimiento 3"},{id:4,name:"Establecimiento 4"},{id:5,name:"Establecimiento 5"},{id:6,name:"Establecimiento 6"}],$scope.save=function(){$rootScope.seleccion.vestablecimiento=$scope.dataEstablecimientos[parseInt($scope.select.extraOptionFilter)],$rootScope.seleccion.establecimiento=!1,console.log("establecimiento:::::"+$rootScope.seleccion.vestablecimiento),$sessionStorage.root||($sessionStorage.root={}),$sessionStorage.root.seleccion_establecimiento={vestablecimiento:$rootScope.seleccion.vestablecimiento,establecimiento:$rootScope.seleccion.establecimiento},$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("select-sostenedor-login-modal",[]).controller("selectsostenedorModalInstanceCtrl",["$scope","$uibModalInstance","params","$rootScope","$localStorage","$sessionStorage",function($scope,$uibModalInstance,params,$rootScope,$localStorage,$sessionStorage){$scope.sdata=params,$scope.select={},$scope.select.extraOptionFilter=0,$scope.dataSostenedores=[{id:1,name:"Sostenedor 1"},{id:2,name:"Sostenedor 2"},{id:3,name:"Sostenedor 3"}],$scope.save=function(){$rootScope.seleccion.vsostenedor=$scope.dataSostenedores[parseInt($scope.select.extraOptionFilter)],$rootScope.seleccion.sostenedor=!1,console.log("sostenedor:::::"+$rootScope.seleccion.vsostenedor),$sessionStorage.root||($sessionStorage.root={}),$sessionStorage.root.seleccion_sostenedor={vsostenedor:$rootScope.seleccion.vsostenedor,sostenedor:$rootScope.seleccion.sostenedor},$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-config-myaccount",[]).controller("MantenedorConfigMyaccountController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddEstablecimientoModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/establecimientos/add-establecimiento-modal.tpl.html",ctrl="addEstablecimientoModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddEstablecimientoModal=_openAddEstablecimientoModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("mantenedor-config-mypass",[]).controller("MantenedorConfigMypassController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddEstablecimientoModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/establecimientos/add-establecimiento-modal.tpl.html",ctrl="addEstablecimientoModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddEstablecimientoModal=_openAddEstablecimientoModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-curso-modal",[]).controller("addCursoModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.listAllApps=[{nombre:"Administracin"},{nombre:"Otra"}],$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-cursos",["add-curso-modal"]).controller("MantenedorCursosController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){_setTPLUser(),$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _setTPLUser(){$scope.tplActive="user"}function _disabledUser(){alert("Hola")}function _openAddModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/cursos/add-curso-modal.tpl.html",ctrl="addCursoModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.disabledUser=_disabledUser,$scope.openAddModal=_openAddModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-docente-modal",[]).controller("addDocenteModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-docentes",["add-docente-modal"]).controller("MantenedorDocentesController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/docentes/add-docente-modal.tpl.html",ctrl="addDocenteModalInstanceCtrl",size="lg",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddModal=_openAddModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-establecimiento-modal",[]).controller("addEstablecimientoModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-config-establecimientos",[]).controller("MantenedorConfigEstablecimientosController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){
function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddEstablecimientoModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/establecimientos/add-establecimiento-modal.tpl.html",ctrl="addEstablecimientoModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddEstablecimientoModal=_openAddEstablecimientoModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("mantenedor-establecimientos",["add-establecimiento-modal"]).controller("MantenedorEstablecimientosController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddEstablecimientoModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/establecimientos/add-establecimiento-modal.tpl.html",ctrl="addEstablecimientoModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddEstablecimientoModal=_openAddEstablecimientoModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-gameapp-modal",[]).controller("addGameappModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-gameapp",["add-gameapp-modal"]).controller("MantenedorGameappController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/gameAndApp/add-gameapp-modal.tpl.html",ctrl="addGameappModalInstanceCtrl",size="lg",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddModal=_openAddModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-gamestage-modal",[]).controller("addGamestageModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-gamestage",["add-gamestage-modal","list-gamestage-modal"]).controller("MantenedorGamestageController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/gameAndStage/list-gamestage-modal.tpl.html",ctrl="listGamestageModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddModal=_openAddModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("list-gamestage-modal",[]).controller("listGamestageModalInstanceCtrl",["$scope","$uibModalInstance","params","CONSTANTS","modalFactory",function($scope,$uibModalInstance,params,CONSTANTS,modalFactory){function _openAddModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/gameAndStage/add-gamestage-modal.tpl.html",ctrl="addGamestageModalInstanceCtrl",size="sm",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.openAddModal=_openAddModal,$scope.dataUser=[{},{},{},{},{},{},{},{},{}],$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor",["krApp.constant","mantenedor-usuarios","mantenedor-roles","mantenedor-sostenedores","mantenedor-establecimientos","mantenedor-gameapp","mantenedor-gamestage","mantenedor-config-establecimientos","mantenedor-docentes","mantenedor-cursos","mantenedor-matriculas","mantenedor-config-mypass","mantenedor-config-myaccount"]).config(["$stateProvider","CONSTANTS",function($stateProvider,CONSTANTS){$stateProvider.state("mantenedor",{"abstract":!0,url:"/mantenedor",template:"<ui-view/>",controller:"MantenedorController"}).state("mantenedor.usuarios",{url:"/usuarios",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/usuarios.tpl.html",controller:"MantenedorUsuariosController"}).state("mantenedor.roles",{url:"/roles",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/roles.tpl.html",controller:"MantenedorRolesController"}).state("mantenedor.sostenedores",{url:"/sostenedores",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/sostenedores/sostenedores.tpl.html",controller:"MantenedorSostenedoresController"}).state("mantenedor.establecimientos",{url:"/establecimientos",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/establecimientos/establecimientos.tpl.html",controller:"MantenedorEstablecimientosController"}).state("mantenedor.configestablecimientos",{url:"/configestablecimientos",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/establecimientos/config-establecimientos.tpl.html",controller:"MantenedorConfigEstablecimientosController"}).state("mantenedor.gameapp",{url:"/gameapp",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/gameAndApp/gameapp.tpl.html",controller:"MantenedorGameappController"}).state("mantenedor.gamestage",{url:"/gamestage",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/gameAndStage/gamestage.tpl.html",controller:"MantenedorGamestageController"}).state("mantenedor.docentes",{url:"/docentes",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/docentes/docentes.tpl.html",controller:"MantenedorDocentesController"}).state("mantenedor.cursos",{url:"/cursos",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/cursos/curso.tpl.html",controller:"MantenedorCursosController"}).state("mantenedor.matriculas",{url:"/matriculas",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/matriculas/matricula.tpl.html",controller:"MantenedorMatriculasController"}).state("mantenedor.configmyaccount",{url:"/configmyaccount",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/config/edit-myaccount.tpl.html",controller:"MantenedorConfigMyaccountController"}).state("mantenedor.configmypass",{url:"/configmypass",templateUrl:CONSTANTS.DIR_PATH+"app/mantenedor/config/edit-mypass.tpl.html",controller:"MantenedorConfigMypassController"})}]).controller("MantenedorController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory){function _init(){}$scope.mloading="",$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-matricula-modal",[]).controller("addMatriculaModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("asso-game-modal",[]).controller("assoGameModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-matriculas",["add-matricula-modal","asso-game-modal"]).controller("MantenedorMatriculasController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _disabledUser(){alert("Hola")}function _openAssoModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/matriculas/asso-game-modal.tpl.html",ctrl="assoGameModalInstanceCtrl",size="sm",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openAddModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/matriculas/add-matricula-modal.tpl.html",ctrl="addMatriculaModalInstanceCtrl",size="lg",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.disabledUser=_disabledUser,$scope.openAddModal=_openAddModal,$scope.openAssoModal=_openAssoModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-sostenedor-modal",[]).controller("addSostenedorModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-sostenedores",["add-sostenedor-modal"]).controller("MantenedorSostenedoresController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _openAddSostenedorModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/sostenedores/add-sostenedor-modal.tpl.html",ctrl="addSostenedorModalInstanceCtrl",size="lg",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.openAddSostenedorModal=_openAddSostenedorModal,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("add-rol-modal",[]).controller("addRolModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.listAllApps=[{nombre:"Administracin"},{nombre:"Otra"}],$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("add-user-modal",[]).controller("addUserModalInstanceCtrl",["$scope","$uibModalInstance","params","sweetService","formatValidateService","formatService","validateFormService",function($scope,$uibModalInstance,params,sweetService,validate,format,vform){$scope.sdata=params,$scope.dateStart=new Date,$scope.format="MM-dd-yyyy",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.maindata={nacionalidad:{},region:{},ciudad:{},comuna:{},sexo:"",nombre:"",apaterno:"",amaterno:"",telefono:"",celular:"",email:"",villa:"",direccion:"",observaciones:""},$scope.sdata.id,$scope.list=vform.generateCombo($scope.maindata),$scope.save=function(){var listError=vform.validateNull($scope.maindata,["observaciones"]);validate.rut($scope.maindata.rut+"-"+$scope.maindata.dv)||listError.push("RUT"),validate.mail($scope.maindata.email)||listError.push("EMail"),listError.length>0?sweetService.error(listError):swal("Informacin","Grabado exitosamente","OK")},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-roles",["add-user-modal","rolesapp-user-modal","rolesestb-user-modal","rolessost-user-modal","rpass-user-modal","add-rol-modal"]).controller("MantenedorRolesController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){_setTPLUser(),$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _setTPLUser(){$scope.tplActive="user"}function _setTPLRol(){$scope.tplActive="rol"}function _disabledUser(){alert("Hola")}function _openAddRolModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/add-rol-modal.tpl.html",ctrl="addRolModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openAddUserModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/add-user-modal.tpl.html",ctrl="addUserModalInstanceCtrl",size="lg",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRolesAPPUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rolesapp-user-modal.tpl.html",ctrl="rolesappUserModalInstanceCtrl",size="sm",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRolesESTUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rolesestb-user-modal.tpl.html",ctrl="rolesestbUserModalInstanceCtrl",size="sm",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRolesSOSTUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rolessost-user-modal.tpl.html",ctrl="rolessostUserModalInstanceCtrl",size="sm",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRPASSUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rpass-user-modal.tpl.html",ctrl="rpassUserModalInstanceCtrl",size="md",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.disabledUser=_disabledUser,$scope.openAddUserModal=_openAddUserModal,$scope.openRolesAPPUserModal=_openRolesAPPUserModal,$scope.openRolesESTUserModal=_openRolesESTUserModal,$scope.openRolesSOSTUserModal=_openRolesSOSTUserModal,$scope.openRPASSUserModal=_openRPASSUserModal,$scope.openAddRolModal=_openAddRolModal,$scope.setTPLUser=_setTPLUser,$scope.setTPLRol=_setTPLRol,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]),angular.module("rolesapp-user-modal",[]).controller("rolesappUserModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("rolesestb-user-modal",[]).controller("rolesestbUserModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("rolessost-user-modal",[]).controller("rolessostUserModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("rpass-user-modal",[]).controller("rpassUserModalInstanceCtrl",["$scope","$uibModalInstance","params",function($scope,$uibModalInstance,params){$scope.sdata=params,$scope.save=function(){$uibModalInstance.close()},$scope.cancel=function(){$uibModalInstance.dismiss()}}]),angular.module("mantenedor-usuarios",["add-user-modal","rolesapp-user-modal","rolesestb-user-modal","rolessost-user-modal","rpass-user-modal","add-rol-modal"]).controller("MantenedorUsuariosController",["$scope","$stateParams","Tools","$uibModal","CONSTANTS","$timeout","Admin","$rootScope","$localStorage","AuthService","$state","modalFactory","DateTools",function($scope,$stateParams,Tools,$uibModal,CONSTANTS,$timeout,Admin,$rootScope,$localStorage,AuthService,$state,modalFactory,DateTools){function _init(){_setTPLUser(),$scope.listAllAmbitosRol=[{nombre:"Empresa"},{nombre:"Otra"}]}function _setTPLUser(){$scope.tplActive="user"}function _setTPLRol(){$scope.tplActive="rol"}function _disabledUser(){alert("Hola")}function _openAddRolModal(){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/add-rol-modal.tpl.html",ctrl="addRolModalInstanceCtrl",size="md",data={unidad:"UNIDAD"},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openAddUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/add-user-modal.tpl.html",ctrl="addUserModalInstanceCtrl",size="lg",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRolesAPPUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rolesapp-user-modal.tpl.html",ctrl="rolesappUserModalInstanceCtrl",size="sm",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRolesESTUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rolesestb-user-modal.tpl.html",ctrl="rolesestbUserModalInstanceCtrl",size="sm",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRolesSOSTUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rolessost-user-modal.tpl.html",ctrl="rolessostUserModalInstanceCtrl",size="sm",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}function _openRPASSUserModal(id){var template=CONSTANTS.DIR_PATH+"app/mantenedor/userAndRol/rpass-user-modal.tpl.html",ctrl="rpassUserModalInstanceCtrl",size="md",data={id:id},params=data;modalFactory.open(template,ctrl,size,params).result.then(function(responseNote){console.log("modal::: ",responseNote),responseNote.is_edit})}$scope.mloading="",$scope.dateStart=new Date,$scope.format="MM-dd-yyyy hh:mm a",$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:!1,showButtonBar:!1},$scope.tplActive="",$scope.extraOptionFilter="eof2",$scope.dataUser=[{},{},{}],$scope.listAllAmbitosRol=[],$scope.unidad=$localStorage.uid.unidadTXT,$scope.init=_init,$scope.disabledUser=_disabledUser,$scope.openAddUserModal=_openAddUserModal,$scope.openRolesAPPUserModal=_openRolesAPPUserModal,$scope.openRolesESTUserModal=_openRolesESTUserModal,$scope.openRolesSOSTUserModal=_openRolesSOSTUserModal,$scope.openRPASSUserModal=_openRPASSUserModal,$scope.openAddRolModal=_openAddRolModal,$scope.setTPLUser=_setTPLUser,$scope.setTPLRol=_setTPLRol,$scope.init(),$scope.$watch("todoX",function(newValue,oldValue){})}]);